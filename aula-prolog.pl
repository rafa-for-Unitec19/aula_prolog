%Base de Datos, Proyecto Prolog
%Aulas
aula(wwe65, 45, 0).
aula(pwk06, 50, 3).
aula(gdv15, 30, 3).
aula(chr39, 55, 15).
aula(xaj47, 45, 6).
aula(zeu23, 65, 15).
aula(rqn27, 10, 0).
aula(hmv48, 20, 3).
aula(yey51, 55, 4).
aula(aee28, 20, 4).
aula(mgo15, 40, 12).
aula(nvx90, 45, 13).
aula(yoj70, 35, 5).
aula(rkt71, 45, 0).
aula(rle23, 45, 5).
aula(yyw19, 20, 4).
aula(pbg80, 20, 0).
aula(iuf96, 30, 7).
aula(zho78, 65, 19).
aula(tjh49, 55, 9).
aula(efm35, 55, 14).
aula(ekz06, 65, 20).
aula(sod19, 30, 2).
aula(gwp04, 70, 10).
aula(xck80, 40, 9).
aula(lsg35, 20, 2).
aula(wsu95, 20, 2).
aula(dss10, 30, 3).
aula(ymu31, 30, 2).
aula(rwf09, 65, 20).
aula(vfz77, 25, 7).
aula(mhf23, 20, 6).
aula(irn19, 20, 6).
aula(zpo58, 15, 0).
aula(sop42, 70, 17).
aula(npn43, 70, 19).
aula(end65, 70, 5).
aula(xyj22, 25, 7).
aula(iry78, 50, 16).
aula(iph96, 15, 5).
aula(lyp79, 45, 15).
aula(rdm72, 55, 9).
aula(liu77, 35, 6).
aula(phw58, 35, 3).
aula(vae02, 20, 0).
aula(uwz98, 10, 1).
aula(nzl42, 10, 0).
aula(zsk10, 60, 12).
aula(job17, 30, 3).
aula(zhe56, 25, 5).
aula(oci08, 35, 10).
aula(zqq92, 35, 1).
aula(zai85, 40, 7).
aula(qjw45, 45, 8).
aula(psm50, 45, 4).
aula(pis21, 15, 5).
aula(xoa19, 40, 3).
aula(nfh34, 70, 21).
aula(dbj60, 30, 6).
aula(rvs50, 25, 6).
aula(qyd95, 25, 4).
aula(czp61, 25, 6).
aula(wty36, 40, 10).
aula(efk22, 30, 6).
aula(ovm92, 35, 2).
aula(wia17, 10, 1).
aula(lkv19, 10, 1).

%Estudiantes
estudiante(3001, 1, [fis201, tll314]).
estudiante(3002, 1, [eie1]).
estudiante(3003, 1, [esp103]).
estudiante(3004, 1, [soc101, lcc104, mat101, ccc107]).
estudiante(3005, 0, [lcc104, esp103]).
estudiante(3006, 1, [soc101, esp103, eie1]).
estudiante(3007, 0, [fis201, soc101, tll314]).
estudiante(3008, 1, []).
estudiante(3009, 0, [sel406]).
estudiante(3010, 1, [adm102, soc101, eie1]).
estudiante(3011, 0, [lcc104]).
estudiante(3012, 1, [esp103]).
estudiante(3013, 1, []).
estudiante(3014, 1, [mat101, tll314, eie1]).
estudiante(3015, 0, []).
estudiante(3016, 1, [fis201, adm102, tll314, lcc104]).
estudiante(3017, 1, [ccc107, tll314]).
estudiante(3018, 1, [lcc104, mat101, fis201]).
estudiante(3019, 1, []).
estudiante(3020, 0, [sel406, mat101, his101, tll314]).
estudiante(3021, 0, [sel406, lcc104, eie1, soc101]).
estudiante(3022, 1, [fis201, lcc104, sel406, esp103]).
estudiante(3023, 1, [his101, tel201, adm102, ccc107]).
estudiante(3024, 0, [adm102, esp103, lcc104]).
estudiante(3025, 0, []).
estudiante(3026, 1, []).
estudiante(3027, 0, [sel406, adm102]).
estudiante(3028, 0, []).
estudiante(3029, 0, [eie1, ccc107, tel201, soc101]).
estudiante(3030, 1, [sel406, fis201, his101, tel201]).
estudiante(3031, 1, []).
estudiante(3032, 1, [ccc107, sel406]).
estudiante(3033, 0, [tll314, esp103, fis201]).
estudiante(3034, 0, [adm102]).
estudiante(3035, 1, [tll314, ccc107, his101, esp103]).
estudiante(3036, 1, []).
estudiante(3037, 0, [fis201]).
estudiante(3038, 1, [tll314]).
estudiante(3039, 1, [sel406, tel201]).
estudiante(3040, 1, [lcc104, tel201, mat101, tll314]).
estudiante(3041, 0, []).
estudiante(3042, 0, [eie1, ccc107]).
estudiante(3043, 1, [adm102]).
estudiante(3044, 0, [ccc107, sel406]).
estudiante(3045, 0, [sel406]).
estudiante(3046, 0, [lcc104, tel201]).
estudiante(3047, 0, [his101, tel201, mat101, soc101]).
estudiante(3048, 0, [fis201, esp103, eie1]).
estudiante(3049, 1, []).
estudiante(3050, 1, [fis201]).
estudiante(3051, 1, [his101, lcc104]).
estudiante(3052, 0, [tel201, tll314, his101, adm102]).
estudiante(3053, 1, [mat101, lcc104]).
estudiante(3054, 1, [mat101, adm102]).
estudiante(3055, 1, [tll314, soc101, tel201]).
estudiante(3056, 1, [soc101, ccc107, fis201]).
estudiante(3057, 1, []).
estudiante(3058, 1, [esp103, tll314, fis201, adm102]).
estudiante(3059, 1, [adm102, tel201, tll314, eie1]).
estudiante(3060, 1, [sel406]).
estudiante(3061, 1, [esp103, fis201, his101]).
estudiante(3062, 1, [esp103, fis201]).
estudiante(3063, 0, [ccc107, lcc104, soc101]).
estudiante(3064, 1, []).
estudiante(3065, 0, []).
estudiante(3066, 1, [fis201, soc101, his101, tll314]).
estudiante(3067, 1, [his101]).
estudiante(3068, 1, []).
estudiante(3069, 1, [his101, sel406]).
estudiante(3070, 1, [fis201, esp103, eie1, mat101]).
estudiante(3071, 1, []).
estudiante(3072, 0, [esp103, mat101, lcc104, tll314]).
estudiante(3073, 1, [esp103]).
estudiante(3074, 0, [esp103, his101, tel201]).
estudiante(3075, 1, [soc101, esp103]).
estudiante(3076, 1, [mat101, tel201]).
estudiante(3077, 1, [sel406]).
estudiante(3078, 1, [esp103, fis201]).
estudiante(3079, 0, [esp103]).
estudiante(3080, 0, [adm102, fis201, tll314, mat101]).
estudiante(3081, 0, [soc101]).
estudiante(3082, 0, [eie1, tel201]).
estudiante(3083, 1, [adm102, eie1, esp103, fis201]).
estudiante(3084, 0, [esp103, tll314, ccc107]).
estudiante(3085, 0, [eie1, his101, adm102, tel201]).
estudiante(3086, 0, [fis201, adm102]).
estudiante(3087, 0, [lcc104]).
estudiante(3088, 0, [fis201]).
estudiante(3089, 1, []).
estudiante(3090, 0, [soc101]).
estudiante(3091, 1, [soc101, sel406, ccc107, fis201]).
estudiante(3092, 1, [ccc107, tel201]).
estudiante(3093, 1, []).
estudiante(3094, 0, [sel406, ccc107, tll314]).
estudiante(3095, 0, [soc101, tel201]).
estudiante(3096, 1, [esp103, adm102, tel201, ccc107]).
estudiante(3097, 0, [mat101, sel406]).
estudiante(3098, 0, [mat101, soc101]).
estudiante(3099, 1, [mat101, adm102]).
estudiante(3100, 0, []).
estudiante(3101, 1, [fis201]).
estudiante(3102, 0, []).
estudiante(3103, 0, []).
estudiante(3104, 0, [fis201, his101, ccc107]).
estudiante(3105, 1, [soc101]).
estudiante(3106, 0, [tel201]).
estudiante(3107, 1, [adm102, eie1, sel406]).
estudiante(3108, 0, [mat101, eie1, lcc104, adm102]).
estudiante(3109, 1, [his101, adm102, fis201]).
estudiante(3110, 0, [esp103, eie1]).
estudiante(3111, 1, [ccc107, adm102, mat101, tel201]).
estudiante(3112, 1, [sel406]).
estudiante(3113, 1, []).
estudiante(3114, 0, [soc101]).
estudiante(3115, 1, [adm102]).
estudiante(3116, 0, [tll314, adm102]).
estudiante(3117, 0, [sel406, eie1, lcc104, adm102]).
estudiante(3118, 0, [mat101]).
estudiante(3119, 1, [ccc107, mat101, tll314]).
estudiante(3120, 0, [lcc104, his101, adm102, mat101]).
estudiante(3121, 0, []).
estudiante(3122, 0, [lcc104, adm102, tll314, mat101]).
estudiante(3123, 1, [his101, eie1]).
estudiante(3124, 0, [adm102, sel406, fis201, esp103]).

%Fecha de Examenes
fechaexam(mat101, ['05.03.2020', '24.04.2020', '13.06.2020', '02.08.2020']).
fechaexam(esp103, ['06.03.2020', '25.04.2020', '14.06.2020', '03.08.2020']).
fechaexam(his101, ['07.03.2020', '26.04.2020', '15.06.2020', '04.08.2020']).
fechaexam(lcc104, ['08.03.2020', '27.04.2020', '16.06.2020', '05.08.2020']).
fechaexam(soc101, ['09.03.2020', '28.04.2020', '17.06.2020', '06.08.2020']).
fechaexam(ccc107, ['10.03.2020', '29.04.2020', '18.06.2020', '07.08.2020']).
fechaexam(eie1, ['11.03.2020', '30.04.2020', '19.06.2020', '08.08.2020']).
fechaexam(fis201, ['12.03.2020', '01.05.2020', '20.06.2020', '09.08.2020']).
fechaexam(sel406, ['13.03.2020', '02.05.2020', '21.06.2020', '10.08.2020']).
fechaexam(adm102, ['14.03.2020', '03.05.2020', '22.06.2020', '11.08.2020']).
fechaexam(tll314, ['15.03.2020', '04.05.2020', '23.06.2020', '12.08.2020']).
fechaexam(tel201, ['16.03.2020', '05.05.2020', '24.06.2020', '13.08.2020']).

% Funciones para el problema #1
existe(X, [X|T1]).
existe(X,[H1|T1]):- 
    existe(X,T1).

estudiaMateria(X,Y):-
    estudiante(Y,_,Z),
    existe(X,Z).

lista_estudiantes(IdCurso,Resultado):- 
    findall(Estudiante, estudiaMateria(IdCurso,Estudiante), Resultado).


% Funciones para el problema #2
equal(X,X).
buscar(X,[W|Z]):- equal(X,W);
    buscar(X,Z).
lista_clases(ID, X):- estudiante(ID,_,X).        
lista_fechas(ID,F):- findall(X,(lista_clases(ID,CLS),buscar(CL,CLS),fechaexam(CL,X)),F).

% Funciones para el problema #3

%Funcion principal de aulas adecuadas
aulas_adecuadas(X,S):- lista_estudiantes(X,E),tamanio(E,D),D>0,estudiantes_zurdos(E,A),tamanio(E,B),lista_aulas(C),busqueda(C,B,A,Z),S = Z.
aulas_adecuadas(X,S):- lista_estudiantes(X,E),tamanio(E,D),D=:=0,S=[].

%Se obtienen los estudiantes zurdos           
estudiantes_zurdos([X|Y],Z):- estudiante(X,1,_), estudiantes_zurdos(Y,Z1), Z is Z1+1.
estudiantes_zurdos([X|Y],Z):- estudiante(X,0,_), estudiantes_zurdos(Y,Z1), Z is Z1.
estudiantes_zurdos([],Z):- Z is 0.
%Se obtienen los tamanios de loa arreglos que luego se comparan
tamanio([],0).
tamanio([_|Y],S):-tamanio(Y,L),S is L+1.
%Se buscan las aulas
busca_aulas(B,A,Z):-lista_aulas(C),busqueda(C,B,A,Y),Z is Y.
lista_aulas(X):- findall(Aula, aula(Aula,_,_), X).

%Se hace una busqueda mas especifica utilizando la cantidad de estudiantes y estudiantes zurdos para obtener las aulas adecuadas.
busqueda([],_,_,[]).
busqueda([C|F],B,A,Z):-aula(C,D,E),B =< D, A=<E, busqueda(F,B,A,Z1), Z=[C|Z1].
busqueda([C|F],B,A,Z):-aula(C,_,E),A > E, busqueda(F,B,A,Z1), Z=Z1.
busqueda([C|F],B,A,Z):-aula(C,D,_),B > D, busqueda(F,B,A,Z1), Z=Z1.
